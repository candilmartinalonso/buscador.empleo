<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador de Empleo Pro | Búsqueda Inteligente</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Estilos y Animaciones Personalizadas -->
    <style>
        :root {
            --glow-color-1: #4a00e0;
            --glow-color-2: #8e2de2;
        }

        /* --- Base y Fondo Animado --- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0c0a1a;
            color: #e5e7eb;
            overflow-x: hidden;
        }
        
        #aurora-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at 70% 30%, var(--glow-color-1) 0%, transparent 50%),
                        radial-gradient(ellipse at 30% 70%, var(--glow-color-2) 0%, transparent 50%);
            animation: aurora 20s linear infinite;
            filter: blur(100px);
            z-index: -1;
            opacity: 0.8;
        }

        /* --- Animaciones de Keyframes --- */
        @keyframes aurora {
            0% { transform: rotate(0deg) scale(1.2); }
            50% { transform: rotate(180deg) scale(1.5); }
            100% { transform: rotate(360deg) scale(1.2); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        @keyframes popIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .fade-in {
            animation: fadeIn 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        .result-item, .history-tag {
            animation: popIn 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
            opacity: 0; /* Oculto al inicio para la animación */
        }
        
        .result-item {
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out; /* Para efecto 3D y sombra */
        }

        /* --- Tooltip Mejorado --- */
        .tooltip {
            position: relative;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            background-color: #111827;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 6px 10px;
            position: absolute;
            z-index: 10;
            bottom: 130%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            white-space: nowrap;
            font-size: 0.875rem;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(-5px);
        }
        
        /* Ocultar scrollbar */
        ::-webkit-scrollbar {
            width: 0;
            background: transparent;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4 antialiased">
    
    <div id="aurora-background"></div>

    <div class="w-full max-w-4xl mx-auto z-10">
        <!-- Tarjeta Principal con Efecto "Glassmorphism" -->
        <main class="bg-black/40 backdrop-blur-xl rounded-3xl shadow-2xl p-6 md:p-10 border border-white/10">
            
            <!-- Encabezado -->
            <header class="text-center mb-8 fade-in">
                <div class="flex justify-center items-center mx-auto h-16 w-16 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl shadow-lg mb-4">
                    <svg class="h-8 w-8 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                    </svg>
                </div>
                <h1 class="text-4xl md:text-5xl font-extrabold text-white tracking-tight">Buscador de Empleo Pro</h1>
                <p class="mt-3 text-lg text-gray-300 max-w-xl mx-auto">Tu portal hacia el próximo gran paso profesional.</p>
            </header>

            <!-- Formulario de Búsqueda -->
            <form id="searchForm" class="mb-6 fade-in" style="animation-delay: 150ms;">
                <div class="relative flex items-center">
                    <input type="text" id="jobQuery" name="jobQuery" class="w-full pl-6 pr-28 py-4 text-lg text-gray-200 bg-black/30 border-2 border-white/20 rounded-full focus:outline-none focus:ring-4 focus:ring-purple-500/50 focus:border-purple-500 transition-all duration-300 shadow-sm placeholder-gray-400" placeholder="Ej: React, Project Manager, Ventas..." required aria-label="Puesto de trabajo a buscar">
                    <button id="clearBtn" type="button" class="absolute right-20 p-2 text-gray-400 hover:text-white transition-colors hidden" aria-label="Limpiar búsqueda">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                    <button type="submit" class="absolute inset-y-1 right-1 flex items-center justify-center w-16 h-auto text-white bg-gradient-to-br from-purple-600 to-indigo-700 hover:from-purple-700 hover:to-indigo-800 rounded-full transition-all duration-200 transform hover:scale-110 focus:outline-none focus:ring-4 focus:ring-indigo-500/50 shadow-lg" aria-label="Realizar búsqueda">
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor">
                           <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                        </svg>
                    </button>
                </div>
            </form>

            <!-- Historial de Búsqueda -->
            <div id="historyContainer" class="flex flex-wrap gap-2 justify-center mb-8 px-4 fade-in" style="animation-delay: 300ms;">
                <!-- Las etiquetas del historial se inyectarán aquí -->
            </div>

            <!-- Sección de Resultados -->
            <section id="resultsSection" aria-live="polite">
                <div id="resultsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5">
                    <!-- El estado inicial o los resultados se mostrarán aquí -->
                </div>
            </section>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Constantes y Elementos del DOM ---
            const LS_HISTORY_KEY = 'jobSearchHistory';
            const ui = {
                searchForm: document.getElementById('searchForm'),
                jobQueryInput: document.getElementById('jobQuery'),
                clearBtn: document.getElementById('clearBtn'),
                resultsList: document.getElementById('resultsList'),
                historyContainer: document.getElementById('historyContainer')
            };

            // --- Base de Datos de Portales de Empleo ---
            const jobPortals = [
                { name: 'Bumeran', url: q => `https://www.bumeran.com.ar/empleos-busqueda-${q.replace(/\s+/g, '-')}.html` },
                { name: 'Computrabajo', url: q => `https://ar.computrabajo.com/ofertas-de-trabajo/?q=${encodeURIComponent(q)}` },
                { name: 'LinkedIn', url: q => `https://www.linkedin.com/jobs/search/?keywords=${encodeURIComponent(q)}&location=Argentina` },
                { name: 'Zonajobs', url: q => `https://www.zonajobs.com.ar/empleos-busqueda-${q.replace(/\s+/g, '-')}.html` }
            ].sort((a, b) => a.name.localeCompare(b.name));

            // --- Iconos SVG para Feedback Visual ---
            const icons = {
                copy: `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg>`,
                check: `<svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>`
            };

            // --- Lógica de Inicialización ---
            function init() {
                loadSearchHistory();
                checkForURLQuery();
                setupEventListeners();
                if (!new URLSearchParams(window.location.search).get('q')) {
                    renderInitialState();
                }
            }

            // --- Manejadores de Eventos ---
            function setupEventListeners() {
                ui.searchForm.addEventListener('submit', handleSearch);
                ui.jobQueryInput.addEventListener('input', () => ui.clearBtn.classList.toggle('hidden', !ui.jobQueryInput.value));
                ui.clearBtn.addEventListener('click', clearSearch);
            }

            // --- Lógica Principal de Búsqueda ---
            function handleSearch(event) {
                event.preventDefault();
                const query = ui.jobQueryInput.value.trim();
                if (!query) {
                    ui.jobQueryInput.focus();
                    return;
                }
                updateURL(query);
                saveSearchQuery(query);
                renderResults(query);
            }

            function clearSearch() {
                ui.jobQueryInput.value = '';
                ui.clearBtn.classList.add('hidden');
                ui.jobQueryInput.focus();
                updateURL('');
                renderInitialState();
            }

            // --- Renderizado de UI ---
            function renderResults(query) {
                ui.resultsList.innerHTML = '';
                jobPortals.forEach((portal, index) => {
                    const portalUrl = portal.url(query);
                    const card = createPortalCard(portal.name, portalUrl, index);
                    ui.resultsList.appendChild(card);
                });
            }
            
            function renderInitialState() {
                ui.resultsList.innerHTML = `
                    <div class="md:col-span-2 lg:col-span-3 text-center p-8 text-gray-400 fade-in">
                        <svg class="mx-auto h-12 w-12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM10.5 7.5v6m3-3h-6" />
                        </svg>
                        <h3 class="mt-4 text-xl font-semibold text-gray-300">Comienza tu búsqueda</h3>
                        <p class="mt-1">Ingresa un puesto o tecnología para ver los enlaces a los portales de empleo.</p>
                    </div>
                `;
            }

            function createPortalCard(name, url, index) {
                const card = document.createElement('div');
                card.className = 'result-item bg-black/20 p-5 rounded-2xl shadow-lg border border-white/10 flex flex-col justify-between';
                card.style.animationDelay = `${index * 80}ms`;

                card.innerHTML = `
                    <h3 class="font-bold text-xl text-white truncate">${name}</h3>
                    <div class="mt-4 flex items-center space-x-2">
                        <a href="${url}" target="_blank" rel="noopener noreferrer" class="w-full text-center px-4 py-2 text-sm font-semibold text-white bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-purple-500">
                            Ver Ofertas
                        </a>
                        <button class="copy-btn p-2 text-gray-300 hover:text-white bg-white/10 hover:bg-white/20 rounded-lg transition-colors tooltip flex-shrink-0" data-url="${url}" aria-label="Copiar enlace para ${name}">
                            <span class="tooltiptext">Copiar Enlace</span>
                            ${icons.copy}
                        </button>
                    </div>
                `;
                
                card.querySelector('.copy-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    copyToClipboard(e.currentTarget);
                });
                
                card.addEventListener('mousemove', handleCardMove);
                card.addEventListener('mouseleave', handleCardLeave);

                return card;
            }

            // --- Lógica del Historial ---
            function getSearchHistory() {
                const history = localStorage.getItem(LS_HISTORY_KEY);
                return history ? JSON.parse(history) : [];
            }

            function saveSearchQuery(query) {
                let history = getSearchHistory();
                // Eliminar duplicados y mover el actual al principio
                history = history.filter(item => item.toLowerCase() !== query.toLowerCase());
                history.unshift(query);
                // Limitar el historial a 10 elementos
                if (history.length > 10) {
                    history.pop();
                }
                localStorage.setItem(LS_HISTORY_KEY, JSON.stringify(history));
                loadSearchHistory();
            }

            function loadSearchHistory() {
                const history = getSearchHistory();
                ui.historyContainer.innerHTML = '';
                if (history.length > 0) {
                    history.forEach((query, index) => {
                        const tag = document.createElement('button');
                        tag.className = 'history-tag bg-white/10 hover:bg-white/20 text-gray-200 text-sm font-medium py-1.5 px-3 rounded-full transition-colors';
                        tag.textContent = query;
                        tag.style.animationDelay = `${index * 50}ms`;
                        tag.onclick = () => {
                            ui.jobQueryInput.value = query;
                            ui.searchForm.dispatchEvent(new Event('submit'));
                            ui.clearBtn.classList.remove('hidden');
                        };
                        ui.historyContainer.appendChild(tag);
                    });
                }
            }

            // --- Helpers y Efectos ---
            function copyToClipboard(button) {
                const url = button.dataset.url;
                const tooltip = button.querySelector('.tooltiptext');
                navigator.clipboard.writeText(url).then(() => {
                    tooltip.textContent = '¡Copiado!';
                    button.innerHTML = `<span class="tooltiptext">¡Copiado!</span>${icons.check}`;
                    setTimeout(() => {
                        tooltip.textContent = 'Copiar Enlace';
                        button.innerHTML = `<span class="tooltiptext">Copiar Enlace</span>${icons.copy}`;
                    }, 2000);
                }).catch(err => {
                    console.error('Error al copiar:', err);
                    tooltip.textContent = 'Error al copiar';
                });
            }
            
            function updateURL(query) {
                try {
                    const url = new URL(window.location);
                    if (query) {
                        url.searchParams.set('q', query);
                    } else {
                        url.searchParams.delete('q');
                    }
                    window.history.pushState({}, '', url);
                } catch (e) {
                    console.warn("No se pudo actualizar la URL. Esto puede ocurrir en entornos restringidos como iframes.");
                }
            }

            function checkForURLQuery() {
                const params = new URLSearchParams(window.location.search);
                const query = params.get('q');
                if (query) {
                    ui.jobQueryInput.value = query;
                    ui.clearBtn.classList.remove('hidden');
                    renderResults(query);
                }
            }

            // --- Efecto 3D "Tilt" en las tarjetas ---
            const TILT_STRENGTH = 15;
            function handleCardMove(e) {
                const card = e.currentTarget;
                const { width, height, left, top } = card.getBoundingClientRect();
                const x = e.clientX - left;
                const y = e.clientY - top;
                
                const rotateX = (y / height - 0.5) * -TILT_STRENGTH;
                const rotateY = (x / width - 0.5) * TILT_STRENGTH;

                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.05, 1.05, 1.05)`;
                card.style.boxShadow = '0 25px 50px -12px rgba(0, 0, 0, 0.5)';
            }
            function handleCardLeave(e) {
                const card = e.currentTarget;
                card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)';
                card.style.boxShadow = '';
            }

            // --- Iniciar la aplicación ---
            init();
        });
    </script>
</body>
</html>

